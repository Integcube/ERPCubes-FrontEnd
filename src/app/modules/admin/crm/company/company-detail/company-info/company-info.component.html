<div class="flex flex-col flex-auto justify-start bg-white h-main-section">
    <div class="flex justify-between w-full px-3 pt-3">
        <div class="flex items-center">
            <mat-icon class="text-xs text-accent2 cursor-pointer" svgIcon="heroicons_outline:chevron-left"
                [routerLink]="['/crm/contacts/company']"></mat-icon>
            <span class="text-base font-bold text-accent2 hover:underline cursor-pointer"
                [routerLink]="['/crm/contacts/company']">
               Back to Companies
            </span>
        </div>
        <!-- <div class="flex items-center">
            <mat-icon class="text-xs text-accent2" svgIcon="heroicons_outline:chevron-left"></mat-icon>
            <span class="text-base font-bold text-accent2 hover:underline cursor-pointer"
                [routerLink]="['/crm/contacts/company']">
                Company
            </span>
        </div> -->
        <!-- <div class="flex items-center">
            <span class="text-base font-bold text-accent2 hover:underline cursor-pointer"
                [matMenuTriggerFor]="actionMenu">
                Actions
            </span>
            <mat-menu #actionMenu="matMenu">
                <button mat-menu-item>Yesterday</button>
                <button mat-menu-item>2 days ago</button>
                <button mat-menu-item>3 days ago</button>
            </mat-menu>
            <mat-icon class="text-xs text-accent2" svgIcon="heroicons_outline:chevron-down"></mat-icon>
        </div> -->
    </div>
    <div class="flex flex-col sm:flex-row flex-auto sm:items-center px-6 max-h-30 min-h-30 ">
        <!-- Avatar and name -->
        <div class="flex flex-auto items-center min-w-0">
            <div class="flex flex-0 items-center justify-center w-20 h-20 rounded-full overflow-hidden">
                <ng-container *ngIf="selectedCompany.avatar">
                    <img class="object-cover w-full h-full" [src]="selectedCompany.avatar" alt="Contact avatar" />
                </ng-container>
                <ng-container *ngIf="!selectedCompany.avatar">
                    <div
                        class="flex items-center justify-center w-full h-full rounded-full text-xl uppercase bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200">
                        {{selectedCompany.name.charAt(0)}}
                    </div>
                </ng-container>
            </div>
            <div class="min-w-0 ml-4">
                <div class="text-xl leading-5 truncate" style="font-weight: 600;color: #0c5d99 !important">{{selectedCompany.name}}</div>
                <div class="leading-5 truncate text-secondary text-sm">{{selectedCompany.website}}</div>
            </div>
        </div>
    </div>
    <div class="flex flex-row justify-center w-full gap-6 border-b px-4 mt-2 pb-2 ">
      
        <div class="flex flex-col items-center justify-center  cursor-pointer">
            <button mat-icon-button (click)="addEmail()">
                <mat-icon class="icon-size-5 ">email</mat-icon>
            </button>
            <span class="text-sm text-center  mt-1">
                Email
            </span>
        </div>
        <div class="flex flex-col items-center justify-center  cursor-pointer"  (click)="addCall()">
            <button mat-icon-button>
                <mat-icon class="icon-size-5 ">call</mat-icon>
            </button>
            <span class="text-sm text-center mt-1">
                Call
            </span>
        </div>
        <div class="flex flex-col items-center justify-center  cursor-pointer" (click)="addMeeting()">
            <button mat-icon-button>
                <mat-icon class="icon-size-5">person</mat-icon>
            </button>
            <span class="text-sm text-center mt-1">
                Meeting
            </span>
        </div>
      
     <div class="flex flex-col items-center justify-center  cursor-pointer">
            <button mat-icon-button [matMenuTriggerFor]="postCardMenu01"> 
                <mat-icon class="icon-size-5">more_horiz</mat-icon>
            </button>
            <span class="text-sm text-center mt-1">
                More
            </span>
        </div> 
        <mat-menu #postCardMenu01="matMenu">

            <button  (click)="addTask()" mat-menu-item>
                <span class="flex items-center">
                <mat-icon class="icon-size-5 mr-1">add_task</mat-icon>
                  <span class="text-sm truncate w-10"> Task</span>
                </span>
              </button>
              <button (click)="addNote()" mat-menu-item>
                <span class="flex items-center">
                <mat-icon class="icon-size-5 mr-1">edit_note</mat-icon>
                  <span class="text-sm truncate w-10"> Notes</span>
                </span>
              </button>
            
        </mat-menu>
    </div>
    <div class="flex flex-row justify-between w-full " fuseScrollbar>
        <mat-accordion>
            <mat-expansion-panel [togglePosition]="'before'">
                <mat-expansion-panel-header>
                    <mat-panel-title class="items-center justify-between">
                        <span class="text-base ">About This Company</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="flex flex-col">
                    <div class="w-full max-w-3xl">
                        <form [formGroup]="companyForm">
                            <div>
                                <label for="name" class="text-sm font-semibold ml-3">Company Name:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'name'" #name>
                                </div>
                                <mat-error *ngIf="companyForm.get('name').hasError('required')" class="text-sm">
                                    Company Name is required
                                </mat-error>
                            </div>
                            <div>
                                <label for="website" class="text-sm font-semibold ml-3">Company Domain:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'website'" #website>
                                </div>
                                <mat-error *ngIf="companyForm.get('website').hasError('required')" class="text-sm">
                                    Company Name is required
                                </mat-error>
                            </div>
                            <div>
                                <label for="salesOwner" class="text-sm font-semibold ml-3">Company Owner:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-pointer border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <select class="w-full font-medium leading-5 bg-transparent h-full"
                                    [formControlName]="'companyOwner'" #salesOwner>
                                    <ng-container *ngIf="users$|async as users">
                                        <option *ngFor="let user of users"  [value]="user.id">{{user.name}}</option>
                                        </ng-container>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label for="industryId" class="text-sm font-semibold ml-3">Indusry:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-pointer border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <select class="w-full font-medium leading-5 bg-transparent h-full"
                                    [formControlName]="'industryId'" #industryId>
                                    <ng-container *ngIf="industries$|async as industries">
                                        <option [value]="-1"></option>
                                        <option *ngFor="let industry of industries"  [value]="industry.industryId">{{industry.industryTitle}}</option>
                                        </ng-container>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label for="mobile" class="text-sm font-semibold ml-3">Mobile:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'mobile'" #mobile>
                                </div>
                            </div>
                            <div>
                                <label for="work" class="text-sm font-semibold ml-3">Work:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'work'" #work>
                                </div>
                            </div>
                            <div>
                                <label for="billingCity" class="text-sm font-semibold ml-3">City:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'billingCity'" #billingCity>
                                </div>
                            </div>
                            <div>
                                <label for="billingState" class="text-sm font-semibold ml-3">State:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'billingState'" #billingState>
                                </div>
                            </div>
                            <div>
                                <label for="billingZip" class="text-sm font-semibold ml-3">ZIP:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'billingZip'" #billingZip>
                                </div>
                            </div>
                            <div>
                                <label for="billingCountry" class="text-sm font-semibold ml-3">Country:</label>
                                <div
                                    class="flex items-center w-full py-2 px-3 rounded-md cursor-text border border-transparent focus-within:bg-white focus-within:shadow-sm focus-within:border-primary dark:focus-within:bg-gray-900">
                                    <input class="w-full font-medium leading-5 bg-transparent" [spellcheck]="'false'"
                                        [formControlName]="'billingCountry'" #billingCountry>
                                </div>
                            </div>
                            <!-- Actions -->
                            <div class="flex flex-row justify-end " *ngIf="!companyForm.invalid && companyForm.dirty">
                                <!-- Save -->
                                <button class="ml-2" mat-stroked-button class="text-xs" [matTooltip]="'Save'"
                                    (click)="save()">
                                    Save
                                </button>

                            </div>
                        </form>
                    </div>
                    <!-- </div> -->
                </div>
            </mat-expansion-panel>
            <mat-expansion-panel [togglePosition]="'before'">
                <mat-expansion-panel-header>
                    <mat-panel-title class="items-center justify-between">
                        <span class="text-base">Website Activity</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <p class="text-primary">Track the customer requests associated with this record.</p>
            </mat-expansion-panel>
            <mat-expansion-panel [togglePosition]="'before'">
                <mat-expansion-panel-header>
                    <mat-panel-title class="items-center justify-between">
                        <span class="text-base">Company Subscription</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <p class="text-primary">Track the customer requests associated with this record.</p>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
</div>